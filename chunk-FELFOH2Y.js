import{a as N,b as Y,c as Q}from"./chunk-GJY3UEER.js";import{a as X}from"./chunk-RS2GEYJU.js";import{a as L}from"./chunk-G5KA7DMQ.js";import{a as U}from"./chunk-V6KGQEPR.js";import{a as G}from"./chunk-T32ATWVE.js";import{b as z,f as j,g as w,h as B,j as _,l as R,m as O,n as q,r as F}from"./chunk-EMUXDAZT.js";import{Aa as p,Ab as D,Ba as m,Da as y,Ea as b,Fa as S,G as M,I as g,J as f,Ma as a,Na as C,Ra as T,X as P,Y as I,Z as l,ca as u,e as W,ea as V,ia as v,jb as A,mb as H,qa as k,ra as E,sa as d,ta as o,ua as r,va as h,ya as x}from"./chunk-QQJZZCOM.js";var K=W(X());var Z=["backgroundVideo"],ee=["carousel"],te=(s,e)=>e.id;function ie(s,e){s&1&&(o(0,"div",18),h(1,"div",19),r())}function ne(s,e){if(s&1){let t=x();o(0,"button",28),p("click",function(){g(t);let n=m(2).$implicit,c=m();return f(c.deleteSlider(n.id))}),a(1,"Remove"),r()}}function oe(s,e){if(s&1){let t=x();o(0,"button",29),p("click",function(){g(t);let n=m(2).$implicit,c=m();return f(c.goToUpdateSlider(n.id))}),a(1,"Update"),r()}}function re(s,e){if(s&1&&(o(0,"div",20)(1,"div",21),h(2,"img",22),r(),o(3,"div",23)(4,"h3",24),a(5),r(),o(6,"p"),a(7),r(),o(8,"div",25),v(9,ne,2,0,"button",26)(10,oe,2,0,"button",27),r()()()),s&2){let t=m().$implicit,i=m();l(2),d("src",T("",i.imageApi,"",t.imageUrl),P),l(3),C(t.title),l(2),C(t.header),l(2),d("ngIf",i.roles()),l(),d("ngIf",i.roles())}}function se(s,e){s&1&&v(0,re,11,7,"ng-template",11)}var $=class s{constructor(e,t,i,n){this.router=e;this.dashboardService=t;this.auth=i;this.toastr=n}imageApi=M(z);customOptions={loop:!0,dots:!0,navSpeed:700,navText:['<img class="arrow" src="images/Vector1.svg">','<img class="arrow" src="images/Vector.svg">'],responsive:{0:{items:1,nav:!1,dots:!1},576:{items:1,nav:!0,dots:!0},750:{items:1,nav:!0,dots:!1},772:{items:1,nav:!0,dots:!0}},nav:!0,animateIn:"fadeIn",animateOut:"fadeOut",margin:0};isLoading=!0;backgroundVideo;carousel;ngAfterViewInit(){this.setupVideoBackground(),this.animateSlideContent(),this.setupVideo()}onKeyDown(e){e.key==="ArrowRight"?this.moveToNextSlide():e.key==="ArrowLeft"&&this.moveToPreviousSlide()}moveToNextSlide(){this.carousel&&this.carousel.next()}moveToPreviousSlide(){this.carousel&&this.carousel.prev()}onSlideChange(e){setTimeout(()=>{this.animateSlideContent(e.startPosition)},100)}animateSlideContent(e=0){document.querySelectorAll(".slide-item").forEach(n=>{n.querySelector(".content-boxed")?.classList.remove("active"),n.querySelector(".slide-image")?.classList.remove("active")});let i=document.querySelector(".owl-item.active .slide-item");if(i){let n=i.querySelector(".content-boxed"),c=i.querySelector(".slide-image");n&&n.classList.add("active"),c&&c.classList.add("active")}}setupVideoBackground(){let e=this.backgroundVideo.nativeElement;requestAnimationFrame(()=>{e.addEventListener("ended",()=>{e.currentTime=0,e.play().catch(t=>{console.error("Error while trying to play the video: ",t)})})}),e.addEventListener("canplay",()=>{e.play().catch(t=>{console.error("Error while trying to play the video: ",t)})})}setVideoSpeed(e){this.backgroundVideo.nativeElement.playbackRate=e}setupVideo(){this.setVideoSpeed(.7)}onVideoLoaded(){let e=this.backgroundVideo.nativeElement;e.muted=!0,e.play().catch(t=>{console.error("Error while trying to play the video: ",t)})}sliders=[];ngOnInit(){this.GetAllSlider(),this.startVisitorSession(),console.log("User is a regular visitor. Starting session tracking.")}ngOnDestroy(){this.roles()||this.endVisitorSession()}GetAllSlider(){this.dashboardService.GetAllSliderHome().subscribe({next:e=>{this.sliders=e,this.sliders.length===1?(this.customOptions.nav=!1,this.customOptions.loop=!1):(this.customOptions.nav=!0,this.customOptions.loop=!0)},error:()=>{console.log("Error loading sliders")}})}roles(){let e="http://schemas.microsoft.com/ws/2008/06/identity/claims/role",t=this.auth.getAccessToken();if(!t||typeof t!="string"||t.trim()==="")return!1;try{let n=L(t)[e];return n==="Admin"||n==="Staff"}catch(i){return console.error("Error decoding token:",i),!1}}deleteSlider(e){K.default.fire({title:"Are you sure?",text:"Do you want to delete this slider?",icon:"warning",showCancelButton:!0,confirmButtonColor:"#d33",cancelButtonColor:"#3085d6",confirmButtonText:"Yes, delete it!"}).then(t=>{t.isConfirmed&&this.dashboardService.DeleteSliderHome(e).subscribe({next:()=>{this.sliders=this.sliders.filter(i=>i.id!==e),this.toastr.success("Slider deleted successfully")},error:()=>{this.toastr.error("Error deleting slider")}})})}goToUpdateSlider(e){this.router.navigate([`/Dashboard/slider-Home/${e}`])}startVisitorSession(){this.roles()||sessionStorage.getItem("sessionId")||this.dashboardService.startSession().subscribe({next:e=>{console.log("Visitor session started successfully."),sessionStorage.setItem("sessionId",e),sessionStorage.setItem("startTime",new Date().toISOString())},error:e=>{console.error("Error starting session:",e)}})}endVisitorSession(){let e=sessionStorage.getItem("sessionId"),t=sessionStorage.getItem("startTime");if(!e||!t){console.error("Session ID or Start Time not found in sessionStorage.");return}let i=parseInt(e,10);isNaN(i)?console.error("Invalid Session ID stored in sessionStorage."):this.dashboardService.endSession(i).subscribe({next:()=>{console.log("Session ended successfully. Data sent to backend."),sessionStorage.removeItem("sessionId"),sessionStorage.removeItem("startTime")},error:n=>{console.error("Error ending session:",n)}})}static \u0275fac=function(t){return new(t||s)(u(D),u(G),u(U),u(F))};static \u0275cmp=V({type:s,selectors:[["app-home"]],viewQuery:function(t,i){if(t&1&&(y(Z,5),y(ee,5)),t&2){let n;b(n=S())&&(i.backgroundVideo=n.first),b(n=S())&&(i.carousel=n.first)}},hostBindings:function(t,i){t&1&&p("keydown",function(c){return i.onKeyDown(c)},I)},decls:31,vars:4,consts:[["backgroundVideo",""],["carousel",""],["class","centered-spinner-container",4,"ngIf"],["autoplay","","loop","","muted","","playsinline","","preload","auto",1,"background-video",3,"loadeddata"],["src","videos/bg1.webm","type","video/webm"],["src","videos/bg.mp4","type","video/mp4"],["src","images/BG.webp","alt","",1,"bg"],[1,"container"],[1,"hero-section"],[1,"carousel-container","owl-theme","owl-carousel-one"],[3,"changed","options"],["carouselSlide",""],[1,"taif-logo-container"],[1,"logo-char","char-t"],[1,"logo-char","char-a"],[1,"logo-char","char-i"],[1,"logo-char","char-f"],[1,"title2"],[1,"centered-spinner-container"],[1,"spinner"],[1,"slide-item","horizontal-slide"],[1,"slide-image"],["alt","",1,"pic",3,"src"],[1,"content-boxed"],[1,"te-title"],[1,"margin"],["class","btn btn-danger remove",3,"click",4,"ngIf"],["class","btn btn-warning",3,"click",4,"ngIf"],[1,"btn","btn-danger","remove",3,"click"],[1,"btn","btn-warning",3,"click"]],template:function(t,i){if(t&1){let n=x();v(0,ie,2,0,"div",2),o(1,"video",3,0),p("loadeddata",function(){return g(n),f(i.onVideoLoaded())}),h(3,"source",4)(4,"source",5),r(),h(5,"img",6),o(6,"div",7)(7,"section",8)(8,"div",9)(9,"owl-carousel-o",10,1),p("changed",function(J){return g(n),f(i.onSlideChange(J))}),k(11,se,1,0,null,11,te),r()()()(),o(13,"div",12)(14,"p",13),a(15,"T"),r(),o(16,"p",14),a(17,"A"),r(),o(18,"p",15),a(19,"I"),r(),o(20,"p",16),a(21,"F"),r()(),o(22,"div",17)(23,"p"),a(24,"T"),r(),o(25,"p"),a(26,"A"),r(),o(27,"p"),a(28,"I"),r(),o(29,"p"),a(30,"F"),r()()}t&2&&(d("ngIf",i.isLoading),l(9),d("options",i.customOptions),l(2),E(i.sliders),l(2),d("@taifLogoAnimation",void 0),l(9),d("@taifLogoAnimation",void 0))},dependencies:[Q,Y,N,H,A],styles:[".horizontal-slide[_ngcontent-%COMP%]{display:flex;flex-direction:column!important;height:570px}.slide-image[_ngcontent-%COMP%]{flex:0 0 50%;display:flex;justify-content:center;opacity:0;transform:translateY(50px);transition:transform 1s ease-out,opacity 1s ease-out}.slide-image.active[_ngcontent-%COMP%]{opacity:1;transform:translateY(0)}.slide-image[_ngcontent-%COMP%]   .pic[_ngcontent-%COMP%]{width:79%;height:auto;object-fit:contain}.content-boxed[_ngcontent-%COMP%]{flex:0 0 50%;display:flex;flex-direction:column;align-items:flex-end;text-align:right;opacity:0;transform:translate(-50px);transition:transform 1s ease-out,opacity 1s ease-out}.content-boxed.active[_ngcontent-%COMP%]{transform:translate(0);opacity:1}.owl-carousel[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:100%;height:auto;object-fit:cover}.carousel-container[_ngcontent-%COMP%]{position:relative;overflow:hidden}.te-title[_ngcontent-%COMP%]{color:orange;font-size:2.125rem;font-family:Bold;margin:0}.content-boxed[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{color:#fff;font-size:1.15rem;font-family:Light;margin:0;width:100%;text-align:right;direction:rtl}.background-video[_ngcontent-%COMP%]{position:fixed;top:0;left:0;width:100%;height:100%;object-fit:cover;z-index:1;opacity:.15}.background-video.video-bg-dark[_ngcontent-%COMP%]{filter:brightness(.4) grayscale(.2)}.bg[_ngcontent-%COMP%]{position:fixed;top:0;left:0;width:100%;height:100%;object-fit:cover;z-index:-1;opacity:1}.taif-logo-container[_ngcontent-%COMP%]{position:absolute;z-index:100;top:20%;left:6%;font-size:1rem;color:#fff;opacity:1;transition:opacity 1s ease-in-out}.taif-logo-container[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin-bottom:10px!important}.title2[_ngcontent-%COMP%]{position:absolute;z-index:100;left:95%;font-size:1rem;color:#fff;top:20%}.title2[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin-bottom:7px!important}.remove[_ngcontent-%COMP%]{position:relative;z-index:9999}.centered-spinner-container[_ngcontent-%COMP%]{display:flex;justify-content:center;align-items:center;height:100vh;width:100vw;position:fixed;top:0;left:0;z-index:9999}.spinner[_ngcontent-%COMP%]{width:11.2px;height:11.2px;border-radius:11.2px;box-shadow:28px 0 #474bff33,22.7px 16.5px #474bff66,8.68px 26.6px #474bff99,-8.68px 26.6px #474bffcc,-22.7px 16.5px #474bff;animation:_ngcontent-%COMP%_spinner-b87k6z 1s infinite linear}@keyframes _ngcontent-%COMP%_spinner-b87k6z{to{transform:rotate(360deg)}}@media (min-width: 576px){.title2[_ngcontent-%COMP%]{top:67%}.slide-image[_ngcontent-%COMP%]   .pic[_ngcontent-%COMP%]{width:66%}.content-boxed[_ngcontent-%COMP%]{gap:0}.slide-image[_ngcontent-%COMP%]{justify-content:center}.slide-image[_ngcontent-%COMP%]   .pic[_ngcontent-%COMP%]{width:50%}.margin[_ngcontent-%COMP%]{margin-right:160px}}@media (min-width: 768px){.horizontal-slide[_ngcontent-%COMP%]{flex-direction:row!important}.horizontal-slide[_ngcontent-%COMP%]{gap:0!important;flex-direction:row!important;justify-content:flex-end}.slide-image[_ngcontent-%COMP%]{width:100%;opacity:0;display:flex;justify-content:flex-end;transform:translate(-50px);transition:transform 1s ease-out,opacity 1s ease-out;position:relative;left:20%}.slide-image[_ngcontent-%COMP%]   .pic[_ngcontent-%COMP%]{width:132%}.slide-image.active[_ngcontent-%COMP%]{opacity:1;transform:translate(0)}.content-boxed[_ngcontent-%COMP%]{text-align:center;padding:0;position:relative;justify-content:center;opacity:0;transform:translateY(50px);transition:transform 1s ease-out,opacity 1s ease-out}.content-boxed.active[_ngcontent-%COMP%]{transform:translateY(0);opacity:1}.content-boxed[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{width:83%}}@media (min-width: 992px){.slide-image[_ngcontent-%COMP%]{left:0}.slide-image[_ngcontent-%COMP%]   .pic[_ngcontent-%COMP%]{width:130%;position:relative}.content-boxed[_ngcontent-%COMP%]{gap:15px!important}}@media (min-width: 1115px){.content-boxed[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{width:100%}}"],data:{animation:[j("taifLogoAnimation",[R(":enter",[_({opacity:0}),O("p",[_({opacity:0,transform:"translateY(-20px)"})],{optional:!0}),B([w("1s",_({opacity:1})),O("p",q(950,[w("1s ease-out",_({opacity:1,transform:"translateY(0)"}))]),{optional:!0})])])])]}})};export{$ as Home};
