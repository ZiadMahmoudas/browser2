import{a as C}from"./chunk-T32ATWVE.js";import{a as V,b as u,c as q,d as A,e as F,f as h,g as W,h as N,i as B,l as D}from"./chunk-NQUXY33H.js";import{r as w}from"./chunk-EMUXDAZT.js";import{Aa as p,Ma as d,Oa as E,Z as n,ca as I,ea as y,ia as c,jb as T,mb as x,sa as o,ta as r,ua as t,va as g,yb as k}from"./chunk-QQJZZCOM.js";function O(a,l){a&1&&(r(0,"div",28),d(1," Header is required "),t())}function M(a,l){a&1&&(r(0,"div",28),d(1," Title is required "),t())}function P(a,l){a&1&&(r(0,"div",28),d(1," SmallTitle is required "),t())}function j(a,l){a&1&&(r(0,"div",28),d(1," TextButton is required "),t())}function R(a,l){a&1&&(r(0,"div",28),d(1," Image is required "),t())}function H(a,l){a&1&&(r(0,"div",28),d(1," Thumbnails is required "),t())}function U(a,l){a&1&&(r(0,"div",28),d(1," FullScreenImage is required "),t())}var G=class a{constructor(l,i,e){this.toastr=l;this.dashboardService=i;this.route=e;this.addSlider=new F({title:new h("",[u.required]),header:new h("",[u.required]),textButton:new h("",[u.required]),smallTitle:new h("",[u.required]),image:new h(null,[u.required]),thumbnails:new h(null,[u.required]),fullScreenImage:new h(null,[u.required])})}sliders=[];isEdit=!1;editId=null;selectedImage=null;selectedThumbnail=null;selectedFullScreenImage=null;addSlider;ngOnInit(){this.loadSliders(),this.route.params.subscribe(l=>{let i=l.id;i?(this.isEdit=!0,this.editId=i,this.getSlider(i)):(this.isEdit=!1,this.editId=null,this.addSlider.get("image")?.setValidators([u.required]),this.addSlider.get("thumbnails")?.setValidators([u.required]),this.addSlider.get("fullScreenImage")?.setValidators([u.required])),this.addSlider.get("image")?.updateValueAndValidity(),this.addSlider.get("thumbnails")?.updateValueAndValidity(),this.addSlider.get("fullScreenImage")?.updateValueAndValidity()})}getSlider(l){this.dashboardService.GetOnlyOneWorker(l).subscribe({next:i=>{let e={title:i.title,header:i.header,textButton:i.textButton,smallTitle:i.smallTitle};this.addSlider.patchValue(e),this.addSlider.get("image")?.clearValidators(),this.addSlider.get("thumbnails")?.clearValidators(),this.addSlider.get("fullScreenImage")?.clearValidators(),this.addSlider.get("image")?.updateValueAndValidity(),this.addSlider.get("thumbnails")?.updateValueAndValidity(),this.addSlider.get("fullScreenImage")?.updateValueAndValidity()},error:i=>{this.toastr.error("Error loading slider data")}})}loadSliders(){this.dashboardService.GetAllSliderWork().subscribe({next:l=>{this.sliders=l},error:()=>{this.toastr.error("Error loading sliders")}})}onImageChange(l,i){let e=l.target.files[0];if(e)switch(i){case"image":this.selectedImage=e,this.addSlider.get("image")?.setValue(e);break;case"thumbnails":this.selectedThumbnail=e,this.addSlider.get("thumbnails")?.setValue(e);break;case"fullScreenImage":this.selectedFullScreenImage=e,this.addSlider.get("fullScreenImage")?.setValue(e);break}}onSubmit(){if(this.isEdit||(this.addSlider.get("image")?.markAsTouched(),this.addSlider.get("thumbnails")?.markAsTouched(),this.addSlider.get("fullScreenImage")?.markAsTouched()),this.addSlider.invalid){this.toastr.warning("Please fill all required fields");return}let l=this.addSlider.value,i=new FormData;if(i.append("header",l.header),i.append("title",l.title),i.append("textButton",l.textButton),i.append("smallTitle",l.smallTitle),this.selectedImage&&i.append("image",this.selectedImage),this.selectedThumbnail&&i.append("thumbnails",this.selectedThumbnail),this.selectedFullScreenImage&&i.append("fullScreenImage",this.selectedFullScreenImage),this.isEdit&&this.editId)this.dashboardService.UpdateSliderWork(this.editId,i).subscribe({next:()=>{this.toastr.success("Slider updated successfully")},error:e=>{this.toastr.error(e.error?.message||"Something went wrong during update")}});else{if(!this.selectedImage||!this.selectedThumbnail||!this.selectedFullScreenImage){this.toastr.error("Please select all three images to create a new slider");return}this.dashboardService.CreateSliderWork(i).subscribe({next:()=>{this.toastr.success("Slider added successfully"),this.addSlider.reset(),this.selectedImage=null,this.selectedThumbnail=null,this.selectedFullScreenImage=null},error:e=>{this.toastr.error(e.error?.message||"Something went wrong during creation")}})}}static \u0275fac=function(i){return new(i||a)(I(w),I(C),I(k))};static \u0275cmp=y({type:a,selectors:[["app-slider-works"]],decls:49,vars:10,consts:[[1,"this"],[1,"row","total","g-4"],[1,"col-lg-7"],[1,"card","shadow-lg","border-0","rounded-lg"],[1,"card-header","bg-primary","text-white","text-center","rounded-top"],[1,"mb-0"],[1,"fas","fa-box-open","me-2"],[1,"card-body","p-4"],[3,"ngSubmit","formGroup"],[1,"row"],[1,"form-group","col-6"],["for","header"],["type","text","id","header","formControlName","header","placeholder","Enter slider header",1,"form-control"],["class","text-danger",4,"ngIf"],["for","title"],["type","text","id","title","formControlName","title","placeholder","Enter slider title",1,"form-control"],[1,"form-group"],["for","smallTitle"],["type","text","id","smallTitle","formControlName","smallTitle","placeholder","Enter slider smallTitle",1,"form-control"],["for","textButton"],["type","text","id","textButton","formControlName","textButton","placeholder","Enter slider textButton",1,"form-control"],["for","image"],["type","file","id","image","formControlName","image",1,"form-control",3,"change"],["for","thumbnails"],["type","file","id","thumbnails","formControlName","thumbnails",1,"form-control",3,"change"],["for","fullScreenImage"],["type","file","id","fullScreenImage","formControlName","fullScreenImage",1,"form-control",3,"change"],["type","submit",1,"btn","btn-primary",3,"disabled"],[1,"text-danger"]],template:function(i,e){if(i&1&&(r(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3)(4,"div",4)(5,"h5",5),g(6,"i",6),d(7),t()(),r(8,"div",7)(9,"form",8),p("ngSubmit",function(){return e.onSubmit()}),r(10,"div",9)(11,"div",10)(12,"label",11),d(13,"\u0627\u0633\u0645 \u0627\u0644\u0628\u0627\u0642\u0629"),t(),g(14,"input",12),c(15,O,2,0,"div",13),t(),r(16,"div",10)(17,"label",14),d(18,"\u0627\u0644\u0639\u0646\u0648\u0627\u0646"),t(),g(19,"input",15),c(20,M,2,0,"div",13),t()(),r(21,"div",16)(22,"label",17),d(23,"\u0627\u0644\u0645\u062D\u062A\u0648\u064A"),t(),r(24,"textarea",18),d(25,"    "),t(),c(26,P,2,0,"div",13),t(),r(27,"div",16)(28,"label",19),d(29,"\u0646\u0635 \u0627\u0644\u0632\u0631\u0627\u0631"),t(),g(30,"input",20),c(31,j,2,0,"div",13),t(),r(32,"div",16)(33,"label",21),d(34,"\u0635\u0648\u0631\u0629 \u0627\u0644\u0634\u0639\u0627\u0631"),t(),r(35,"input",22),p("change",function(s){return e.onImageChange(s,"image")}),t(),c(36,R,2,0,"div",13),t(),r(37,"div",16)(38,"label",23),d(39," \u0627\u0644\u0635\u0648\u0631\u0629 \u0627\u0644\u0645\u0635\u063A\u0631\u0629"),t(),r(40,"input",24),p("change",function(s){return e.onImageChange(s,"thumbnails")}),t(),c(41,H,2,0,"div",13),t(),r(42,"div",16)(43,"label",25),d(44,"\u0627\u0644\u0635\u0648\u0631\u0629 \u0627\u0644\u0643\u0628\u064A\u0631\u0629"),t(),r(45,"input",26),p("change",function(s){return e.onImageChange(s,"fullScreenImage")}),t(),c(46,U,2,0,"div",13),t(),r(47,"button",27),d(48,"Submit"),t()()()()()()()),i&2){let m,s,S,f,v,b,_;n(7),E(" ",e.isEdit?"Update ContentHomeSlider":"Create ContentHomeSlider"," "),n(2),o("formGroup",e.addSlider),n(6),o("ngIf",((m=e.addSlider.get("header"))==null?null:m.invalid)&&((m=e.addSlider.get("header"))==null?null:m.touched)),n(5),o("ngIf",((s=e.addSlider.get("title"))==null?null:s.invalid)&&((s=e.addSlider.get("title"))==null?null:s.touched)),n(6),o("ngIf",((S=e.addSlider.get("smallTitle"))==null?null:S.invalid)&&((S=e.addSlider.get("smallTitle"))==null?null:S.touched)),n(5),o("ngIf",((f=e.addSlider.get("textButton"))==null?null:f.invalid)&&((f=e.addSlider.get("textButton"))==null?null:f.touched)),n(5),o("ngIf",((v=e.addSlider.get("image"))==null?null:v.invalid)&&((v=e.addSlider.get("image"))==null?null:v.touched)),n(5),o("ngIf",((b=e.addSlider.get("thumbnails"))==null?null:b.invalid)&&((b=e.addSlider.get("thumbnails"))==null?null:b.touched)),n(5),o("ngIf",((_=e.addSlider.get("fullScreenImage"))==null?null:_.invalid)&&((_=e.addSlider.get("fullScreenImage"))==null?null:_.touched)),n(),o("disabled",e.addSlider.invalid)}},dependencies:[D,W,V,q,A,N,B,x,T],styles:[".this[_ngcontent-%COMP%]{margin-top:70px}.total[_ngcontent-%COMP%]{width:100%;direction:rtl}@media (min-width: 768px){.total[_ngcontent-%COMP%]{width:200%;justify-content:center}}"]})};export{G as SliderWorks};
