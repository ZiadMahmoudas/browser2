import{a as C}from"./chunk-T32ATWVE.js";import{a as V,b as s,c as F,d as q,e as W,f as h,g as N,h as A,i as B,l as D}from"./chunk-NQUXY33H.js";import{r as w}from"./chunk-EMUXDAZT.js";import{Aa as p,Ma as a,Oa as T,Z as n,ca as I,ea as y,ia as c,jb as E,mb as x,sa as m,ta as r,ua as i,va as g,yb as k}from"./chunk-QQJZZCOM.js";function O(d,l){d&1&&(r(0,"div",28),a(1," Title is required "),i())}function M(d,l){d&1&&(r(0,"div",28),a(1," Header is required "),i())}function P(d,l){d&1&&(r(0,"div",28),a(1," SmallTitle is required "),i())}function j(d,l){d&1&&(r(0,"div",28),a(1," TextButton is required "),i())}function H(d,l){d&1&&(r(0,"div",28),a(1," Image is required "),i())}function R(d,l){d&1&&(r(0,"div",28),a(1," Thumbnails is required "),i())}function U(d,l){d&1&&(r(0,"div",28),a(1," FullScreenImage is required "),i())}var G=class d{constructor(l,t,e){this.toastr=l;this.dashboardService=t;this.route=e;this.addSlider=new W({title:new h("",[s.required]),header:new h("",[s.required]),textButton:new h("",[s.required]),smallTitle:new h("",[s.required]),image:new h(null,[s.required]),thumbnails:new h(null,[s.required]),fullScreenImage:new h(null,[s.required])})}sliders=[];isEdit=!1;editId=null;selectedImage=null;selectedThumbnail=null;selectedFullScreenImage=null;addSlider;ngOnInit(){this.loadSliders(),this.route.params.subscribe(l=>{let t=l.id;t?(this.isEdit=!0,this.editId=t,this.getSlider(t)):(this.isEdit=!1,this.editId=null,this.addSlider.get("image")?.setValidators([s.required]),this.addSlider.get("thumbnails")?.setValidators([s.required]),this.addSlider.get("fullScreenImage")?.setValidators([s.required])),this.addSlider.get("image")?.updateValueAndValidity(),this.addSlider.get("thumbnails")?.updateValueAndValidity(),this.addSlider.get("fullScreenImage")?.updateValueAndValidity()})}getSlider(l){this.dashboardService.GetOnlyOneWorker(l).subscribe({next:t=>{let e={title:t.title,header:t.header,textButton:t.textButton,smallTitle:t.smallTitle};this.addSlider.patchValue(e),this.addSlider.get("image")?.clearValidators(),this.addSlider.get("thumbnails")?.clearValidators(),this.addSlider.get("fullScreenImage")?.clearValidators(),this.addSlider.get("image")?.updateValueAndValidity(),this.addSlider.get("thumbnails")?.updateValueAndValidity(),this.addSlider.get("fullScreenImage")?.updateValueAndValidity()},error:t=>{this.toastr.error("Error loading slider data")}})}loadSliders(){this.dashboardService.GetAllSliderWork().subscribe({next:l=>{this.sliders=l},error:()=>{this.toastr.error("Error loading sliders")}})}onImageChange(l,t){let e=l.target.files[0];if(e)switch(t){case"image":this.selectedImage=e,this.addSlider.get("image")?.setValue(e);break;case"thumbnails":this.selectedThumbnail=e,this.addSlider.get("thumbnails")?.setValue(e);break;case"fullScreenImage":this.selectedFullScreenImage=e,this.addSlider.get("fullScreenImage")?.setValue(e);break}}onSubmit(){if(this.isEdit||(this.addSlider.get("image")?.markAsTouched(),this.addSlider.get("thumbnails")?.markAsTouched(),this.addSlider.get("fullScreenImage")?.markAsTouched()),this.addSlider.invalid){this.toastr.warning("Please fill all required fields");return}let l=this.addSlider.value,t=new FormData;if(t.append("header",l.header),t.append("title",l.title),t.append("textButton",l.textButton),t.append("smallTitle",l.smallTitle),this.selectedImage&&t.append("image",this.selectedImage),this.selectedThumbnail&&t.append("thumbnails",this.selectedThumbnail),this.selectedFullScreenImage&&t.append("fullScreenImage",this.selectedFullScreenImage),this.isEdit&&this.editId)this.dashboardService.UpdateSliderWork(this.editId,t).subscribe({next:()=>{this.toastr.success("Slider updated successfully")},error:e=>{this.toastr.error(e.error?.message||"Something went wrong during update")}});else{if(!this.selectedImage||!this.selectedThumbnail||!this.selectedFullScreenImage){this.toastr.error("Please select all three images to create a new slider");return}this.dashboardService.CreateSliderWork(t).subscribe({next:()=>{this.toastr.success("Slider added successfully"),this.addSlider.reset(),this.selectedImage=null,this.selectedThumbnail=null,this.selectedFullScreenImage=null},error:e=>{this.toastr.error(e.error?.message||"Something went wrong during creation")}})}}static \u0275fac=function(t){return new(t||d)(I(w),I(C),I(k))};static \u0275cmp=y({type:d,selectors:[["app-slider-works"]],decls:48,vars:10,consts:[[1,"this"],[1,"row","total","g-4"],[1,"col-lg-7"],[1,"card","shadow-lg","border-0","rounded-lg"],[1,"card-header","bg-primary","text-white","text-center","py-4","rounded-top"],[1,"mb-0"],[1,"fas","fa-box-open","me-2"],[1,"card-body","p-4"],[3,"ngSubmit","formGroup"],[1,"row"],[1,"form-group","col-6"],["for","title"],["type","text","id","title","formControlName","title","placeholder","Enter slider title",1,"form-control"],["class","text-danger",4,"ngIf"],["for","header"],["type","text","id","header","formControlName","header","placeholder","Enter slider header",1,"form-control"],[1,"form-group"],["for","smallTitle"],["type","text","id","smallTitle","formControlName","smallTitle","placeholder","Enter slider smallTitle",1,"form-control"],["for","textButton"],["type","text","id","textButton","formControlName","textButton","placeholder","Enter slider textButton",1,"form-control"],["for","image"],["type","file","id","image","formControlName","image",1,"form-control",3,"change"],["for","thumbnails"],["type","file","id","thumbnails","formControlName","thumbnails",1,"form-control",3,"change"],["for","fullScreenImage"],["type","file","id","fullScreenImage","formControlName","fullScreenImage",1,"form-control",3,"change"],["type","submit",1,"btn","btn-primary",3,"disabled"],[1,"text-danger"]],template:function(t,e){if(t&1&&(r(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3)(4,"div",4)(5,"h5",5),g(6,"i",6),a(7),i()(),r(8,"div",7)(9,"form",8),p("ngSubmit",function(){return e.onSubmit()}),r(10,"div",9)(11,"div",10)(12,"label",11),a(13,"Title"),i(),g(14,"input",12),c(15,O,2,0,"div",13),i(),r(16,"div",10)(17,"label",14),a(18,"Header"),i(),g(19,"input",15),c(20,M,2,0,"div",13),i()(),r(21,"div",16)(22,"label",17),a(23,"SmallTitle"),i(),g(24,"input",18),c(25,P,2,0,"div",13),i(),r(26,"div",16)(27,"label",19),a(28,"TextButton"),i(),g(29,"input",20),c(30,j,2,0,"div",13),i(),r(31,"div",16)(32,"label",21),a(33,"Image"),i(),r(34,"input",22),p("change",function(o){return e.onImageChange(o,"image")}),i(),c(35,H,2,0,"div",13),i(),r(36,"div",16)(37,"label",23),a(38,"Thumbnails"),i(),r(39,"input",24),p("change",function(o){return e.onImageChange(o,"thumbnails")}),i(),c(40,R,2,0,"div",13),i(),r(41,"div",16)(42,"label",25),a(43,"FullScreenImage"),i(),r(44,"input",26),p("change",function(o){return e.onImageChange(o,"fullScreenImage")}),i(),c(45,U,2,0,"div",13),i(),r(46,"button",27),a(47,"Submit"),i()()()()()()()),t&2){let u,o,S,f,v,b,_;n(7),T(" ",e.isEdit?"Update ContentHomeSlider":"Create ContentHomeSlider"," "),n(2),m("formGroup",e.addSlider),n(6),m("ngIf",((u=e.addSlider.get("title"))==null?null:u.invalid)&&((u=e.addSlider.get("title"))==null?null:u.touched)),n(5),m("ngIf",((o=e.addSlider.get("header"))==null?null:o.invalid)&&((o=e.addSlider.get("header"))==null?null:o.touched)),n(5),m("ngIf",((S=e.addSlider.get("smallTitle"))==null?null:S.invalid)&&((S=e.addSlider.get("smallTitle"))==null?null:S.touched)),n(5),m("ngIf",((f=e.addSlider.get("textButton"))==null?null:f.invalid)&&((f=e.addSlider.get("textButton"))==null?null:f.touched)),n(5),m("ngIf",((v=e.addSlider.get("image"))==null?null:v.invalid)&&((v=e.addSlider.get("image"))==null?null:v.touched)),n(5),m("ngIf",((b=e.addSlider.get("thumbnails"))==null?null:b.invalid)&&((b=e.addSlider.get("thumbnails"))==null?null:b.touched)),n(5),m("ngIf",((_=e.addSlider.get("fullScreenImage"))==null?null:_.invalid)&&((_=e.addSlider.get("fullScreenImage"))==null?null:_.touched)),n(),m("disabled",e.addSlider.invalid)}},dependencies:[D,N,V,F,q,A,B,x,E],styles:[".this[_ngcontent-%COMP%]{margin-top:70px}.total[_ngcontent-%COMP%]{width:100%}@media (min-width: 768px){.total[_ngcontent-%COMP%]{width:200%;justify-content:center}}"]})};export{G as SliderWorks};
