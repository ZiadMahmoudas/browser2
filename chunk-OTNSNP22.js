import{a as m,b as p}from"./chunk-RIFXOLWT.js";import{d as a,e as k}from"./chunk-MUYJWDKS.js";import{V as n,Z as r,f as c}from"./chunk-OSSRFVXA.js";var i=class s{constructor(e){this.storage=e}accessTokenKey="accessToken";setAccessToken(e){localStorage.setItem(this.accessTokenKey,e)}getAccessToken(){return localStorage.getItem(this.accessTokenKey)}clearAccessToken(){localStorage.removeItem(this.accessTokenKey)}get(e){return this.storage.getItem(e)}set(e,t){this.storage.setItem(e,t)}remove(e){this.storage.removeItem(e)}static \u0275fac=function(t){return new(t||s)(r(p))};static \u0275prov=n({token:s,factory:s.\u0275fac,providedIn:"root"})};var l=class s{constructor(e,t,o){this.http=e;this.tokenService=t;this.baseURL=o}login(e){return new c(t=>{this.http.post(`${this.baseURL}Auth/login`,e,{withCredentials:!0}).subscribe({next:o=>{this.tokenService.setAccessToken(o.accessToken),t.next(o),t.complete()},error:o=>{t.error(o)}})})}refreshToken(){return new c(e=>{this.http.post(`${this.baseURL}Auth/refresh`,{},{withCredentials:!0}).subscribe({next:t=>{this.tokenService.setAccessToken(t.accessToken),e.next(t.accessToken),e.complete()},error:t=>{e.error(t)}})})}saveNewTokens(e){this.tokenService.setAccessToken(e.accessToken)}getAccessToken(){return this.tokenService.getAccessToken()}removeAccessToken(){this.tokenService.clearAccessToken()}logout(){return this.http.post(`${this.baseURL}Auth/logout`,{},{withCredentials:!0,headers:new a({Authorization:"Bearer "+this.tokenService.getAccessToken()})})}static \u0275fac=function(t){return new(t||s)(r(k),r(i),r(m))};static \u0275prov=n({token:s,factory:s.\u0275fac,providedIn:"root"})};export{l as a};
