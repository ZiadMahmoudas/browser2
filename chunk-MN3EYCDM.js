import{a as k}from"./chunk-T32ATWVE.js";import{a as D,b as s,c as F,d as U,e as W,f as p,g as q,h as N,i as B,l as G}from"./chunk-NQUXY33H.js";import{b as C,r as V}from"./chunk-EMUXDAZT.js";import{Aa as f,Ba as v,G as I,Ma as n,Oa as y,X as x,Z as u,ca as h,ea as _,eb as T,ia as g,jb as E,mb as A,sa as d,ta as a,ua as i,va as c,yb as w}from"./chunk-QQJZZCOM.js";function O(l,r){l&1&&(a(0,"div",33),n(1," Title is required "),i())}function R(l,r){l&1&&(a(0,"div",33),n(1," Header is required "),i())}function P(l,r){l&1&&(a(0,"div",33),n(1," SmallTitle is required "),i())}function j(l,r){l&1&&(a(0,"div",33),n(1," TextButton is required "),i())}function z(l,r){if(l&1&&c(0,"img",34),l&2){let e=v();d("src",e.imageApi+e.existingImageUrl,x)}}function H(l,r){if(l&1&&c(0,"img",35),l&2){let e=v();d("src",e.imageApi+e.existingThumbnailUrl,x)}}function L(l,r){if(l&1&&c(0,"img",36),l&2){let e=v();d("src",e.imageApi+e.existingFullScreenImageUrl,x)}}var M=class l{constructor(r,e,t,m){this.toastr=r;this.dashboardService=e;this.route=t;this.cdr=m;this.addSlider=new W({title:new p("",[s.required]),header:new p("",[s.required]),textButton:new p("",[s.required]),smallTitle:new p("",[s.required]),image:new p(null,[s.required]),thumbnails:new p(null,[s.required]),fullScreenImage:new p(null,[s.required])})}imageApi=I(C);sliders=[];isEdit=!1;editId=null;selectedImage=null;selectedThumbnail=null;selectedFullScreenImage=null;addSlider;existingImageUrl=null;existingThumbnailUrl=null;existingFullScreenImageUrl=null;ngOnInit(){this.loadSliders(),this.route.params.subscribe(r=>{let e=r.id;e?(this.isEdit=!0,this.editId=e,this.getSlider(e)):(this.isEdit=!1,this.editId=null,this.addSlider.get("title")?.setValue(""),this.addSlider.get("header")?.setValue(""),this.addSlider.get("textButton")?.setValue(""),this.addSlider.get("smallTitle")?.setValue(""),this.addSlider.get("image")?.setValidators([s.required]),this.addSlider.get("thumbnails")?.setValidators([s.required]),this.addSlider.get("fullScreenImage")?.setValidators([s.required])),this.addSlider.get("image")?.updateValueAndValidity(),this.addSlider.get("thumbnails")?.updateValueAndValidity(),this.addSlider.get("fullScreenImage")?.updateValueAndValidity()})}getSlider(r){this.dashboardService.GetOnlyOneWorker(r).subscribe({next:e=>{let t={title:e.title,header:e.header,textButton:e.textButton,smallTitle:e.smallTitle};this.addSlider.patchValue(t),this.existingImageUrl=e.image,this.existingThumbnailUrl=e.thumbnails,this.existingFullScreenImageUrl=e.fullScreenImage,this.addSlider.get("image")?.clearValidators(),this.addSlider.get("thumbnails")?.clearValidators(),this.addSlider.get("fullScreenImage")?.clearValidators(),this.addSlider.get("image")?.updateValueAndValidity(),this.addSlider.get("thumbnails")?.updateValueAndValidity(),this.addSlider.get("fullScreenImage")?.updateValueAndValidity(),this.cdr.detectChanges()},error:e=>{this.toastr.error("Error loading slider data")}})}loadSliders(){this.dashboardService.GetAllSliderWork().subscribe({next:r=>{this.sliders=r},error:()=>{this.toastr.error("Error loading sliders")}})}onImageChange(r,e){let t=r.target.files[0];if(t)switch(e){case"image":this.selectedImage=t,this.addSlider.get("image")?.setValue(t);break;case"thumbnails":this.selectedThumbnail=t,this.addSlider.get("thumbnails")?.setValue(t);break;case"fullScreenImage":this.selectedFullScreenImage=t,this.addSlider.get("fullScreenImage")?.setValue(t);break}}onSubmit(){if(this.isEdit||(this.addSlider.get("image")?.markAsTouched(),this.addSlider.get("thumbnails")?.markAsTouched(),this.addSlider.get("fullScreenImage")?.markAsTouched()),this.addSlider.invalid){this.toastr.warning("Please fill all required fields");return}let r=this.addSlider.value,e=new FormData;if(e.append("header",r.header),e.append("title",r.title),e.append("textButton",r.textButton),e.append("smallTitle",r.smallTitle),this.selectedImage&&e.append("image",this.selectedImage),this.selectedThumbnail&&e.append("thumbnails",this.selectedThumbnail),this.selectedFullScreenImage&&e.append("fullScreenImage",this.selectedFullScreenImage),this.isEdit&&this.editId)this.dashboardService.UpdateSliderWork(this.editId,e).subscribe({next:()=>{this.toastr.success("Slider updated successfully")},error:t=>{this.toastr.error(t.error?.message||"Something went wrong during update")}});else{if(!this.selectedImage||!this.selectedThumbnail||!this.selectedFullScreenImage){this.toastr.error("Please select all three images to create a new slider");return}this.dashboardService.CreateSliderWork(e).subscribe({next:()=>{this.toastr.success("Slider added successfully"),this.addSlider.reset(),this.selectedImage=null,this.selectedThumbnail=null,this.selectedFullScreenImage=null},error:t=>{this.toastr.error(t.error?.message||"Something went wrong during creation")}})}}static \u0275fac=function(e){return new(e||l)(h(V),h(k),h(w),h(T))};static \u0275cmp=_({type:l,selectors:[["app-slider-works"]],decls:51,vars:10,consts:[[1,"this"],[1,"row","total","g-4"],[1,"col-lg-7"],[1,"card","shadow-lg","border-0","rounded-lg"],[1,"card-header","bg-primary","text-white","text-center","rounded-top"],[1,"mb-0"],[1,"fas","fa-box-open","me-2"],[1,"card-body","p-4"],[3,"ngSubmit","formGroup"],[1,"row"],[1,"form-group","col-6"],["for","title"],["type","text","id","title","formControlName","title","placeholder","Enter slider title",1,"form-control"],["class","text-danger",4,"ngIf"],["for","header"],["type","text","id","header","formControlName","header","placeholder","Enter slider header",1,"form-control"],[1,"form-group"],["for","smallTitle"],["type","text","id","smallTitle","formControlName","smallTitle","placeholder","Enter slider smallTitle",1,"form-control"],["for","textButton"],["type","text","id","textButton","formControlName","textButton","placeholder","Enter slider textButton",1,"form-control"],[1,"form-group","form-group1"],[1,"d-flex","flex-column"],["for","image"],["type","file","id","image","formControlName","image",1,"form-control",3,"change"],["alt","\u0635\u0648\u0631\u0629 \u0627\u0644\u0634\u0639\u0627\u0631 \u0627\u0644\u062D\u0627\u0644\u064A\u0629","style","max-width: 150px; margin-top: 10px; border-radius: 5px; border: 1px solid #ccc;",3,"src",4,"ngIf"],["for","thumbnails"],["type","file","id","thumbnails","formControlName","thumbnails",1,"form-control",3,"change"],["alt","\u0627\u0644\u0635\u0648\u0631\u0629 \u0627\u0644\u0645\u0635\u063A\u0631\u0629 \u0627\u0644\u062D\u0627\u0644\u064A\u0629","style","max-width: 150px; margin-top: 10px; border-radius: 5px; border: 1px solid #ccc;",3,"src",4,"ngIf"],["for","fullScreenImage"],["type","file","id","fullScreenImage","formControlName","fullScreenImage",1,"form-control",3,"change"],["alt","\u0627\u0644\u0635\u0648\u0631\u0629 \u0627\u0644\u0643\u0628\u064A\u0631\u0629 \u0627\u0644\u062D\u0627\u0644\u064A\u0629","style","max-width: 150px; margin-top: 10px; border-radius: 5px; border: 1px solid #ccc;",3,"src",4,"ngIf"],["type","submit",1,"btn","btn-primary",3,"disabled"],[1,"text-danger"],["alt","\u0635\u0648\u0631\u0629 \u0627\u0644\u0634\u0639\u0627\u0631 \u0627\u0644\u062D\u0627\u0644\u064A\u0629",2,"max-width","150px","margin-top","10px","border-radius","5px","border","1px solid #ccc",3,"src"],["alt","\u0627\u0644\u0635\u0648\u0631\u0629 \u0627\u0644\u0645\u0635\u063A\u0631\u0629 \u0627\u0644\u062D\u0627\u0644\u064A\u0629",2,"max-width","150px","margin-top","10px","border-radius","5px","border","1px solid #ccc",3,"src"],["alt","\u0627\u0644\u0635\u0648\u0631\u0629 \u0627\u0644\u0643\u0628\u064A\u0631\u0629 \u0627\u0644\u062D\u0627\u0644\u064A\u0629",2,"max-width","150px","margin-top","10px","border-radius","5px","border","1px solid #ccc",3,"src"]],template:function(e,t){if(e&1&&(a(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3)(4,"div",4)(5,"h5",5),c(6,"i",6),n(7),i()(),a(8,"div",7)(9,"form",8),f("ngSubmit",function(){return t.onSubmit()}),a(10,"div",9)(11,"div",10)(12,"label",11),n(13,"\u0627\u0644\u0639\u0646\u0648\u0627\u0646"),i(),c(14,"input",12),g(15,O,2,0,"div",13),i(),a(16,"div",10)(17,"label",14),n(18,"\u0627\u0633\u0645 \u0627\u0644\u0628\u0627\u0642\u0629"),i(),c(19,"input",15),g(20,R,2,0,"div",13),i()(),a(21,"div",16)(22,"label",17),n(23,"\u0627\u0644\u0645\u062D\u062A\u0648\u064A"),i(),c(24,"textarea",18),g(25,P,2,0,"div",13),i(),a(26,"div",16)(27,"label",19),n(28,"\u0646\u0635 \u0627\u0644\u0632\u0631\u0627\u0631"),i(),c(29,"input",20),g(30,j,2,0,"div",13),i(),a(31,"div",21)(32,"div",22)(33,"label",23),n(34,"\u0635\u0648\u0631\u0629 \u0627\u0644\u0634\u0639\u0627\u0631"),i(),a(35,"input",24),f("change",function(o){return t.onImageChange(o,"image")}),i()(),g(36,z,1,1,"img",25),i(),a(37,"div",21)(38,"div",22)(39,"label",26),n(40,"\u0627\u0644\u0635\u0648\u0631\u0629 \u0627\u0644\u0645\u0635\u063A\u0631\u0629"),i(),a(41,"input",27),f("change",function(o){return t.onImageChange(o,"thumbnails")}),i()(),g(42,H,1,1,"img",28),i(),a(43,"div",21)(44,"div",22)(45,"label",29),n(46,"\u0627\u0644\u0635\u0648\u0631\u0629 \u0627\u0644\u0643\u0628\u064A\u0631\u0629"),i(),a(47,"input",30),f("change",function(o){return t.onImageChange(o,"fullScreenImage")}),i()(),g(48,L,1,1,"img",31),i(),a(49,"button",32),n(50,"Submit"),i()()()()()()()),e&2){let m,o,S,b;u(7),y(" ",t.isEdit?"Update ContentHomeSlider":"Create ContentHomeSlider"," "),u(2),d("formGroup",t.addSlider),u(6),d("ngIf",((m=t.addSlider.get("title"))==null?null:m.invalid)&&((m=t.addSlider.get("title"))==null?null:m.touched)),u(5),d("ngIf",((o=t.addSlider.get("header"))==null?null:o.invalid)&&((o=t.addSlider.get("header"))==null?null:o.touched)),u(5),d("ngIf",((S=t.addSlider.get("smallTitle"))==null?null:S.invalid)&&((S=t.addSlider.get("smallTitle"))==null?null:S.touched)),u(5),d("ngIf",((b=t.addSlider.get("textButton"))==null?null:b.invalid)&&((b=t.addSlider.get("textButton"))==null?null:b.touched)),u(6),d("ngIf",t.isEdit&&t.existingImageUrl),u(6),d("ngIf",t.isEdit&&t.existingThumbnailUrl),u(6),d("ngIf",t.isEdit&&t.existingFullScreenImageUrl),u(),d("disabled",t.addSlider.invalid)}},dependencies:[G,q,D,F,U,N,B,A,E],styles:[".this[_ngcontent-%COMP%]{margin-top:70px}.total[_ngcontent-%COMP%]{width:100%;direction:rtl}@media (min-width: 768px){.total[_ngcontent-%COMP%]{width:200%;justify-content:center}}"]})};export{M as SliderWorks};
