import{a as E}from"./chunk-T32ATWVE.js";import{a as w,b as g,c as x,d as N,e as T,f as S,g as D,h as F,i as G,l as q}from"./chunk-NQUXY33H.js";import{r as I}from"./chunk-EMUXDAZT.js";import{Aa as f,Ma as a,Oa as b,Z as l,ca as u,ea as v,ia as p,jb as y,mb as C,sa as m,ta as n,ua as r,va as h,yb as _}from"./chunk-QQJZZCOM.js";function O(d,t){d&1&&(n(0,"div",18),a(1," Title is required "),r())}function M(d,t){d&1&&(n(0,"div",18),a(1," Header is required "),r())}function A(d,t){d&1&&(n(0,"div",18),a(1," Image is required "),r())}var H=class d{constructor(t,e,i){this.toastr=t;this.dashboardService=e;this.route=i;this.addSlider=new T({title:new S("",[g.required]),header:new S("",[g.required]),image:new S(null,[g.required])})}sliders=[];isEdit=!1;editSocial=null;selectedImage=null;addSlider;ngOnInit(){this.route.params.subscribe(t=>{let e=t.id;e&&(this.getSlider(e),this.isEdit=!0,this.editSocial=e)}),this.loadSliders()}getSlider(t){this.dashboardService.GetOnlyOneItem(t).subscribe({next:e=>{this.addSlider.patchValue(e)},error:e=>{this.toastr.error("Error loading slider data")}})}loadSliders(){this.dashboardService.GetAllSliderHome().subscribe({next:t=>{this.sliders=t},error:()=>{this.toastr.error("Error loading sliders")}})}onImageChange(t){this.selectedImage=t.target.files[0]}onSubmit(){if(this.addSlider.invalid){this.toastr.warning("Please fill all required fields");return}let t=this.addSlider.value;if(this.selectedImage||this.isEdit){let e=new FormData;e.append("header",t.header),e.append("title",t.title),this.selectedImage&&e.append("image",this.selectedImage),this.isEdit&&this.editSocial?this.dashboardService.UpdateSliderHome(e,this.editSocial).subscribe({next:()=>{this.toastr.success("Slider updated successfully")},error:i=>{this.toastr.error(i.error?.message||"Something went wrong")}}):this.dashboardService.CreateSliderHome(e).subscribe({next:()=>{this.toastr.success("Slider added successfully")},error:i=>{this.toastr.error(i.error?.message||"Something went wrong")}})}else this.toastr.error("Please select an image")}static \u0275fac=function(e){return new(e||d)(u(I),u(E),u(_))};static \u0275cmp=v({type:d,selectors:[["app-slider-content"]],decls:27,vars:6,consts:[[1,"this"],[1,"row","total","g-4"],[1,"col-lg-7"],[1,"card","shadow-lg","border-0","rounded-lg"],[1,"card-header","bg-primary","text-white","text-center","py-4","rounded-top"],[1,"mb-0"],[1,"fas","fa-box-open","me-2"],[1,"card-body","p-4"],[3,"ngSubmit","formGroup"],[1,"form-group"],["for","title"],["type","text","id","title","formControlName","title","placeholder","Enter slider title",1,"form-control"],["class","text-danger",4,"ngIf"],["for","header"],["type","text","id","header","formControlName","header","placeholder","Enter slider header",1,"form-control"],["for","image"],["type","file","id","image","formControlName","image",1,"form-control",3,"change"],["type","submit",1,"btn","btn-primary",3,"disabled"],[1,"text-danger"]],template:function(e,i){if(e&1&&(n(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3)(4,"div",4)(5,"h5",5),h(6,"i",6),a(7),r()(),n(8,"div",7)(9,"form",8),f("ngSubmit",function(){return i.onSubmit()}),n(10,"div",9)(11,"label",10),a(12,"Title"),r(),h(13,"input",11),p(14,O,2,0,"div",12),r(),n(15,"div",9)(16,"label",13),a(17,"Header"),r(),h(18,"input",14),p(19,M,2,0,"div",12),r(),n(20,"div",9)(21,"label",15),a(22,"Image"),r(),n(23,"input",16),f("change",function(s){return i.onImageChange(s)}),r(),p(24,A,2,0,"div",12),r(),n(25,"button",17),a(26,"Submit"),r()()()()()()()),e&2){let o,s,c;l(7),b(" ",i.isEdit?"Update ContentHomeSlider":"Create ContentHomeSlider"," "),l(2),m("formGroup",i.addSlider),l(5),m("ngIf",((o=i.addSlider.get("title"))==null?null:o.invalid)&&((o=i.addSlider.get("title"))==null?null:o.touched)),l(5),m("ngIf",((s=i.addSlider.get("header"))==null?null:s.invalid)&&((s=i.addSlider.get("header"))==null?null:s.touched)),l(5),m("ngIf",((c=i.addSlider.get("image"))==null?null:c.invalid)&&((c=i.addSlider.get("image"))==null?null:c.touched)),l(),m("disabled",i.addSlider.invalid)}},dependencies:[q,D,w,x,N,F,G,C,y],styles:[".this[_ngcontent-%COMP%]{margin-top:70px}.total[_ngcontent-%COMP%]{width:200%;justify-content:center}"]})};export{H as SliderContent};
